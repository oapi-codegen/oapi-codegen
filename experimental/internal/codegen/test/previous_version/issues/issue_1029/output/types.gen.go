// Code generated by oapi-codegen; DO NOT EDIT.

package output

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"encoding/json"
	"fmt"
	"strings"
	"sync"
)

// #/components/schemas/Registration
type Registration struct {
	State *RegistrationState `json:"state,omitempty" form:"state,omitempty"`
}

// ApplyDefaults sets default values for fields that are nil.
func (s *Registration) ApplyDefaults() {
}

// #/components/schemas/Registration/properties/state
type RegistrationState struct {
	RegistrationStateOneOf0 *RegistrationStateOneOf0
	RegistrationStateOneOf1 *RegistrationStateOneOf1
	RegistrationStateOneOf2 *RegistrationStateOneOf2
	RegistrationStateOneOf3 *RegistrationStateOneOf3
}

func (u RegistrationState) MarshalJSON() ([]byte, error) {
	var count int
	var data []byte
	var err error

	if u.RegistrationStateOneOf0 != nil {
		count++
		data, err = json.Marshal(u.RegistrationStateOneOf0)
		if err != nil {
			return nil, err
		}
	}
	if u.RegistrationStateOneOf1 != nil {
		count++
		data, err = json.Marshal(u.RegistrationStateOneOf1)
		if err != nil {
			return nil, err
		}
	}
	if u.RegistrationStateOneOf2 != nil {
		count++
		data, err = json.Marshal(u.RegistrationStateOneOf2)
		if err != nil {
			return nil, err
		}
	}
	if u.RegistrationStateOneOf3 != nil {
		count++
		data, err = json.Marshal(u.RegistrationStateOneOf3)
		if err != nil {
			return nil, err
		}
	}

	if count != 1 {
		return nil, fmt.Errorf("RegistrationState: exactly one member must be set, got %d", count)
	}

	return data, nil
}

func (u *RegistrationState) UnmarshalJSON(data []byte) error {
	var successCount int

	var v0 RegistrationStateOneOf0
	if err := json.Unmarshal(data, &v0); err == nil {
		u.RegistrationStateOneOf0 = &v0
		successCount++
	}

	var v1 RegistrationStateOneOf1
	if err := json.Unmarshal(data, &v1); err == nil {
		u.RegistrationStateOneOf1 = &v1
		successCount++
	}

	var v2 RegistrationStateOneOf2
	if err := json.Unmarshal(data, &v2); err == nil {
		u.RegistrationStateOneOf2 = &v2
		successCount++
	}

	var v3 RegistrationStateOneOf3
	if err := json.Unmarshal(data, &v3); err == nil {
		u.RegistrationStateOneOf3 = &v3
		successCount++
	}

	if successCount != 1 {
		return fmt.Errorf("RegistrationState: expected exactly one type to match, got %d", successCount)
	}

	return nil
}

// ApplyDefaults sets default values for fields that are nil.
func (u *RegistrationState) ApplyDefaults() {
}

// #/components/schemas/Registration/properties/state/oneOf/0
type RegistrationStateOneOf0 string

const (
	Undefined RegistrationStateOneOf0 = "undefined"
)

// #/components/schemas/Registration/properties/state/oneOf/1
type RegistrationStateOneOf1 string

const (
	Registered RegistrationStateOneOf1 = "registered"
)

// #/components/schemas/Registration/properties/state/oneOf/2
type RegistrationStateOneOf2 string

const (
	Pending RegistrationStateOneOf2 = "pending"
)

// #/components/schemas/Registration/properties/state/oneOf/3
type RegistrationStateOneOf3 string

const (
	Active RegistrationStateOneOf3 = "active"
)

// Base64-encoded, gzip-compressed OpenAPI spec.
var openAPISpecJSON = []string{
	"H4sIAAAAAAAC/6yQzY7UMBCE736KknJlMrPsibwBJySExNmb1CQNjm2527MaId4dOeFnZw4Iob25q7vr",
	"a1eH96qVeDi9fTcgRX44Q61InMFYV8XZS2iVJcyMLN6IXFJmCVfXYTHLOhyPs9hSn/oxrcfksxzGNHFm",
	"vC2kofTYWK5zHT4vjKja7Hfys9iCtQaTHIjWCDxcfKi8OeqN62ALfx80oRGgS6qhvdcsgfBxwnMqXzGm",
	"UjhauPYuZUafZcBjf+ofncRzGhxgYoHDiyjwiWoOuLCopDjgoT/1J5e9LTrg23fXICkymrZ9HReufnsC",
	"HzmLWvHWFjcFsGvmgPT0haP9lPYQTai/hgA1b/xTYo/lpQActgxutV2vceJZIqe73g7fA/xHq7L9geU1",
	"vDLjdD/9X0Z+NLnwbz4/AgAA//+mSD78zgIAAA==",
}

// decodeOpenAPISpec decodes and decompresses the embedded spec.
func decodeOpenAPISpec() ([]byte, error) {
	joined := strings.Join(openAPISpecJSON, "")
	raw, err := base64.StdEncoding.DecodeString(joined)
	if err != nil {
		return nil, fmt.Errorf("decoding base64: %w", err)
	}
	r, err := gzip.NewReader(bytes.NewReader(raw))
	if err != nil {
		return nil, fmt.Errorf("creating gzip reader: %w", err)
	}
	defer r.Close()
	var out bytes.Buffer
	if _, err := out.ReadFrom(r); err != nil {
		return nil, fmt.Errorf("decompressing: %w", err)
	}
	return out.Bytes(), nil
}

// decodeOpenAPISpecCached returns a closure that caches the decoded spec.
func decodeOpenAPISpecCached() func() ([]byte, error) {
	var cached []byte
	var cachedErr error
	var once sync.Once
	return func() ([]byte, error) {
		once.Do(func() {
			cached, cachedErr = decodeOpenAPISpec()
		})
		return cached, cachedErr
	}
}

var openAPISpec = decodeOpenAPISpecCached()

// GetOpenAPISpecJSON returns the raw OpenAPI spec as JSON bytes.
func GetOpenAPISpecJSON() ([]byte, error) {
	return openAPISpec()
}
