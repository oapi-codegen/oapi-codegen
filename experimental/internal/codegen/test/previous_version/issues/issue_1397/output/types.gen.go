// Code generated by oapi-codegen; DO NOT EDIT.

package output

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"strings"
	"sync"
)

// #/components/schemas/Test
type MyTestRequest struct {
	// A array of enum values
	Field1 []TestField1Item `json:"field1,omitempty" form:"field1,omitempty"`
	// A nested object with allocated name
	Field2 *MyTestRequestNestedField `json:"field2,omitempty" form:"field2,omitempty"`
	// A nested object without allocated name
	Field3 *TestField3 `json:"field3,omitempty" form:"field3,omitempty"`
}

// ApplyDefaults sets default values for fields that are nil.
func (s *MyTestRequest) ApplyDefaults() {
	if s.Field2 != nil {
		s.Field2.ApplyDefaults()
	}
	if s.Field3 != nil {
		s.Field3.ApplyDefaults()
	}
}

// #/components/schemas/Test/properties/field1
// A array of enum values
type TestField1 = []TestField1Item

// #/components/schemas/Test/properties/field1/items
type TestField1Item string

const (
	Option1 TestField1Item = "option1"
	Option2 TestField1Item = "option2"
)

// #/components/schemas/Test/properties/field2
// A nested object with allocated name
type MyTestRequestNestedField struct {
	Field1 bool   `json:"field1" form:"field1"`
	Field2 string `json:"field2" form:"field2"`
}

// ApplyDefaults sets default values for fields that are nil.
func (s *MyTestRequestNestedField) ApplyDefaults() {
}

// #/components/schemas/Test/properties/field3
// A nested object without allocated name
type TestField3 struct {
	Field1 bool   `json:"field1" form:"field1"`
	Field2 string `json:"field2" form:"field2"`
}

// ApplyDefaults sets default values for fields that are nil.
func (s *TestField3) ApplyDefaults() {
}

// Base64-encoded, gzip-compressed OpenAPI spec.
var openAPISpecJSON = []string{
	"H4sIAAAAAAAC/9xUzZKbMAy+8xSapFdCIO106lv30Jkc2kOnL+AYBbwDltcS283bd2zYAJt0Z3otJ/xZ",
	"P58+WdrCkXlAKA9fPit40GwNyMUjNOgwaLHk4LeVFl7yhvJ4kzvdY7aFVsSzKorGSjucdob6grS3uaEa",
	"G3Trg41JuIhZMvLotLcKNofdflduMuvOpDIAsdKhWhCCX8iSATxjYEtOQbnb7/aZod6TQyccvdi02Ov0",
	"C8lh/INUhgI6PaKRCfKBPAaxyK9GAGeLXV3OZ4Aa2QTrJaX8CjoEfQE6A7qhh2fdDcgLayvY89IdkuEa",
	"yYFSvPIuWq3QkTdLsK5ZXPT65ZhSwaclat2E7rO3IRLxdZ3VO3U6ZMF6Emxsuu46Mjqiqemz6z0h74s5",
	"0zkRdajdrX113/5GgYBPgw1YL83zKeUtVN3osXoK8Vu/aQXfL/H9/MSnAVl+JDm+xVBrDQ//pCEN8j/L",
	"+K6EmdfSptIKuQ5mg9cJjcWnFXOsFcg4668MkeWB6stM0pATdLJkrb3vrEkRikcmtxZgXAxvRfkQ8Kxg",
	"sy3mLVJMK6SI1DdXDuzJ8bIz1f7jX1vfENXZnwAAAP//PTfE300FAAA=",
}

// decodeOpenAPISpec decodes and decompresses the embedded spec.
func decodeOpenAPISpec() ([]byte, error) {
	joined := strings.Join(openAPISpecJSON, "")
	raw, err := base64.StdEncoding.DecodeString(joined)
	if err != nil {
		return nil, fmt.Errorf("decoding base64: %w", err)
	}
	r, err := gzip.NewReader(bytes.NewReader(raw))
	if err != nil {
		return nil, fmt.Errorf("creating gzip reader: %w", err)
	}
	defer r.Close()
	var out bytes.Buffer
	if _, err := out.ReadFrom(r); err != nil {
		return nil, fmt.Errorf("decompressing: %w", err)
	}
	return out.Bytes(), nil
}

// decodeOpenAPISpecCached returns a closure that caches the decoded spec.
func decodeOpenAPISpecCached() func() ([]byte, error) {
	var cached []byte
	var cachedErr error
	var once sync.Once
	return func() ([]byte, error) {
		once.Do(func() {
			cached, cachedErr = decodeOpenAPISpec()
		})
		return cached, cachedErr
	}
}

var openAPISpec = decodeOpenAPISpecCached()

// GetOpenAPISpecJSON returns the raw OpenAPI spec as JSON bytes.
func GetOpenAPISpecJSON() ([]byte, error) {
	return openAPISpec()
}
