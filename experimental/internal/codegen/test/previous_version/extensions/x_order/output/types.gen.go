// Code generated by oapi-codegen; DO NOT EDIT.

package output

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"encoding/json"
	"fmt"
	"strings"
	"sync"
	"time"
)

// #/components/schemas/DateInterval
type DateInterval struct {
	Start *Date `json:"start,omitempty" form:"start,omitempty"`
	End   *Date `json:"end,omitempty" form:"end,omitempty"`
}

// ApplyDefaults sets default values for fields that are nil.
func (s *DateInterval) ApplyDefaults() {
}

// #/components/schemas/Port
type Port = int

// #/components/schemas/LowPriorityPort
type LowPriorityPort = int

// #/components/schemas/PortInterval
type PortInterval struct {
	VeryEnd *LowPriorityPort `json:"very_end,omitempty" form:"very_end,omitempty"`
	End     Port             `json:"end" form:"end"`
	Start   Port             `json:"start" form:"start"`
}

// ApplyDefaults sets default values for fields that are nil.
func (s *PortInterval) ApplyDefaults() {
}

// Base64-encoded, gzip-compressed OpenAPI spec.
var openAPISpecJSON = []string{
	"H4sIAAAAAAAC/6yRQUvzQBCG7/srhnwf9NQ0Ubzs2Yvgof9A1uRNu9LsrLNjNIj/XZqmTRAsWrxlH948",
	"zLzDEcFFbym7zou8yIwPDVtDpF53sPS2ZKkhpEhqiDpI8hwsZUVe5GVmotNtsvT+YSpuIwcETfvfU7VF",
	"64ZPolunuAsK6dzuQIi0j7DEj0+odESC5xcvqI8RoiUF12J8RuEIUY80BRBm6aM0qfiwmeGGpXVqqXaK",
	"GR53s3R1gkmd6B8YywGueZIdRD4oNpCB3fPrWjyL1/58cOa9KU7iCwsdNpy9Eeqf9/tf0Fha/FtNx16N",
	"l17tZ1qcb7eD9A+/UH5paPH9mS4arDSfAQAA///x7IFN/gIAAA==",
}

// decodeOpenAPISpec decodes and decompresses the embedded spec.
func decodeOpenAPISpec() ([]byte, error) {
	joined := strings.Join(openAPISpecJSON, "")
	raw, err := base64.StdEncoding.DecodeString(joined)
	if err != nil {
		return nil, fmt.Errorf("decoding base64: %w", err)
	}
	r, err := gzip.NewReader(bytes.NewReader(raw))
	if err != nil {
		return nil, fmt.Errorf("creating gzip reader: %w", err)
	}
	defer r.Close()
	var out bytes.Buffer
	if _, err := out.ReadFrom(r); err != nil {
		return nil, fmt.Errorf("decompressing: %w", err)
	}
	return out.Bytes(), nil
}

// decodeOpenAPISpecCached returns a closure that caches the decoded spec.
func decodeOpenAPISpecCached() func() ([]byte, error) {
	var cached []byte
	var cachedErr error
	var once sync.Once
	return func() ([]byte, error) {
		once.Do(func() {
			cached, cachedErr = decodeOpenAPISpec()
		})
		return cached, cachedErr
	}
}

var openAPISpec = decodeOpenAPISpecCached()

// GetOpenAPISpecJSON returns the raw OpenAPI spec as JSON bytes.
func GetOpenAPISpecJSON() ([]byte, error) {
	return openAPISpec()
}

const DateFormat = "2006-01-02"

type Date struct {
	time.Time
}

func (d Date) MarshalJSON() ([]byte, error) {
	return json.Marshal(d.Format(DateFormat))
}

func (d *Date) UnmarshalJSON(data []byte) error {
	var dateStr string
	err := json.Unmarshal(data, &dateStr)
	if err != nil {
		return err
	}
	parsed, err := time.Parse(DateFormat, dateStr)
	if err != nil {
		return err
	}
	d.Time = parsed
	return nil
}

func (d Date) String() string {
	return d.Format(DateFormat)
}

func (d *Date) UnmarshalText(data []byte) error {
	parsed, err := time.Parse(DateFormat, string(data))
	if err != nil {
		return err
	}
	d.Time = parsed
	return nil
}
