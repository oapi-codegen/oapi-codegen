// Code generated by oapi-codegen; DO NOT EDIT.

package output

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"encoding/json"
	"fmt"
	"strings"
	"sync"

	"github.com/google/uuid"
)

// #/components/schemas/Pet
type Pet struct {
	// The pet uuid.
	UUID string `json:"uuid" form:"uuid"`
	// The name of the pet.
	Name string `json:"name" form:"name"`
}

// ApplyDefaults sets default values for fields that are nil.
func (s *Pet) ApplyDefaults() {
}

// #/components/schemas/Error
type Error struct {
	// Error code
	Code int32 `json:"code" form:"code"`
	// Error message
	Message string `json:"message" form:"message"`
}

// ApplyDefaults sets default values for fields that are nil.
func (s *Error) ApplyDefaults() {
}

// #/components/schemas/OneOf2things
// Notice that the `things` is not capitalised
type OneOf2Things struct {
	OneOf2ThingsOneOf0 *OneOf2ThingsOneOf0
	OneOf2ThingsOneOf1 *OneOf2ThingsOneOf1
}

func (u OneOf2Things) MarshalJSON() ([]byte, error) {
	var count int
	var data []byte
	var err error

	if u.OneOf2ThingsOneOf0 != nil {
		count++
		data, err = json.Marshal(u.OneOf2ThingsOneOf0)
		if err != nil {
			return nil, err
		}
	}
	if u.OneOf2ThingsOneOf1 != nil {
		count++
		data, err = json.Marshal(u.OneOf2ThingsOneOf1)
		if err != nil {
			return nil, err
		}
	}

	if count != 1 {
		return nil, fmt.Errorf("OneOf2Things: exactly one member must be set, got %d", count)
	}

	return data, nil
}

func (u *OneOf2Things) UnmarshalJSON(data []byte) error {
	var successCount int

	var v0 OneOf2ThingsOneOf0
	if err := json.Unmarshal(data, &v0); err == nil {
		u.OneOf2ThingsOneOf0 = &v0
		successCount++
	}

	var v1 OneOf2ThingsOneOf1
	if err := json.Unmarshal(data, &v1); err == nil {
		u.OneOf2ThingsOneOf1 = &v1
		successCount++
	}

	if successCount != 1 {
		return fmt.Errorf("OneOf2Things: expected exactly one type to match, got %d", successCount)
	}

	return nil
}

// ApplyDefaults sets default values for fields that are nil.
func (u *OneOf2Things) ApplyDefaults() {
	if u.OneOf2ThingsOneOf0 != nil {
		u.OneOf2ThingsOneOf0.ApplyDefaults()
	}
	if u.OneOf2ThingsOneOf1 != nil {
		u.OneOf2ThingsOneOf1.ApplyDefaults()
	}
}

// #/components/schemas/OneOf2things/oneOf/0
type OneOf2ThingsOneOf0 struct {
	ID int `json:"id" form:"id"`
}

// ApplyDefaults sets default values for fields that are nil.
func (s *OneOf2ThingsOneOf0) ApplyDefaults() {
}

// #/components/schemas/OneOf2things/oneOf/1
type OneOf2ThingsOneOf1 struct {
	ID UUID `json:"id" form:"id"`
}

// ApplyDefaults sets default values for fields that are nil.
func (s *OneOf2ThingsOneOf1) ApplyDefaults() {
}

// Base64-encoded, gzip-compressed OpenAPI spec.
var openAPISpecJSON = []string{
	"H4sIAAAAAAAC/7xTwXLTMBC9+yt2AjM5JQ7pTfcO9EJz4AMi7Gd7O7YkpHWGwvDvjKzEUZpQBg71yVrt",
	"e3r7dtc6GO1Y0eJuvVlvFgWbxqqC6AAf2BpFH2K8IBKWHoruv+vB9aDK1qDGepIOtDd6wMpYP+ief8Dv",
	"yY7iRiHrhK0pnJYuRNZSOy4dJJQ/HeSh/hWDRC0k/RCFcRi0f1b0EUIOQi0fYIhrGOGG4dfHROvgdWR/",
	"qFUk+CTidpDjrdNeDxD4cCJeURSpaHr3GCNioyiqmwMe30b2qBWJHzGHQ9Vh0Go+E8mzg6Ignk1bnLDB",
	"WRMQznnL7WazzGE1QuV5skXRQfdcR0VZQmWNwEiOIdLO9VxN5ZZPwZrL21vy0vfeo1G0fFdWdnDWwEgo",
	"U24od5BlcY5H8PEq8ezOTUm12q9PqKR44dP85orGkevsGP0+tcPHdgnn1sTsvxh6ZdiXDtNQROx6Tpoa",
	"+x9MEUe2mUbYQRLhvffWq1eqjJOfHQeEoNvXCo2Aa3lsBC18Fm/i/sh0c7f9k+5J3qWGo4J/dSAx5fIf",
	"DR6brXRs2ln+BWTx2QpXIOm0pMVPyXviQMYKVdqx6J4D6sVpTyNp7t+NYbptdUrPRuq2vdMa1y9n/7bJ",
	"b/v6lf95l6dl+R0AAP//iN5s+n8FAAA=",
}

// decodeOpenAPISpec decodes and decompresses the embedded spec.
func decodeOpenAPISpec() ([]byte, error) {
	joined := strings.Join(openAPISpecJSON, "")
	raw, err := base64.StdEncoding.DecodeString(joined)
	if err != nil {
		return nil, fmt.Errorf("decoding base64: %w", err)
	}
	r, err := gzip.NewReader(bytes.NewReader(raw))
	if err != nil {
		return nil, fmt.Errorf("creating gzip reader: %w", err)
	}
	defer r.Close()
	var out bytes.Buffer
	if _, err := out.ReadFrom(r); err != nil {
		return nil, fmt.Errorf("decompressing: %w", err)
	}
	return out.Bytes(), nil
}

// decodeOpenAPISpecCached returns a closure that caches the decoded spec.
func decodeOpenAPISpecCached() func() ([]byte, error) {
	var cached []byte
	var cachedErr error
	var once sync.Once
	return func() ([]byte, error) {
		once.Do(func() {
			cached, cachedErr = decodeOpenAPISpec()
		})
		return cached, cachedErr
	}
}

var openAPISpec = decodeOpenAPISpecCached()

// GetOpenAPISpecJSON returns the raw OpenAPI spec as JSON bytes.
func GetOpenAPISpecJSON() ([]byte, error) {
	return openAPISpec()
}

type UUID = uuid.UUID
