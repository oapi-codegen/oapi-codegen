// Code generated by oapi-codegen; DO NOT EDIT.

package output

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"encoding/json"
	"fmt"
	"strings"
	"sync"
)

// #/components/schemas/BasePrompt
type BasePromptSchemaComponent struct {
	Name    string `json:"name" form:"name"`
	Version int    `json:"version" form:"version"`
}

type BasePrompt = BasePromptSchemaComponent

// ApplyDefaults sets default values for fields that are nil.
func (s *BasePromptSchemaComponent) ApplyDefaults() {
}

// #/components/schemas/TextPrompt
type TextPromptSchemaComponent struct {
	Prompt  string `json:"prompt" form:"prompt"`
	Name    string `json:"name" form:"name"`
	Version int    `json:"version" form:"version"`
}

type TextPrompt = TextPromptSchemaComponent

// ApplyDefaults sets default values for fields that are nil.
func (s *TextPromptSchemaComponent) ApplyDefaults() {
}

// #/components/schemas/ChatMessage
type ChatMessageSchemaComponent struct {
	Role    string `json:"role" form:"role"`
	Content string `json:"content" form:"content"`
}

type ChatMessage = ChatMessageSchemaComponent

// ApplyDefaults sets default values for fields that are nil.
func (s *ChatMessageSchemaComponent) ApplyDefaults() {
}

// #/components/schemas/ChatPrompt
type ChatPromptSchemaComponent struct {
	Prompt  []ChatMessage `json:"prompt" form:"prompt"`
	Name    string        `json:"name" form:"name"`
	Version int           `json:"version" form:"version"`
}

type ChatPrompt = ChatPromptSchemaComponent

// ApplyDefaults sets default values for fields that are nil.
func (s *ChatPromptSchemaComponent) ApplyDefaults() {
}

// #/components/schemas/ChatPrompt/properties/prompt
type ChatPromptPromptPropertySchemaComponent = []ChatMessage

type ChatPromptPrompt = ChatPromptPromptPropertySchemaComponent

// #/components/schemas/Prompt
type PromptSchemaComponent struct {
	PromptOneOf0 *PromptOneOf0
	PromptOneOf1 *PromptOneOf1
}

type Prompt = PromptSchemaComponent

func (u PromptSchemaComponent) MarshalJSON() ([]byte, error) {
	var count int
	var data []byte
	var err error

	if u.PromptOneOf0 != nil {
		count++
		data, err = json.Marshal(u.PromptOneOf0)
		if err != nil {
			return nil, err
		}
	}
	if u.PromptOneOf1 != nil {
		count++
		data, err = json.Marshal(u.PromptOneOf1)
		if err != nil {
			return nil, err
		}
	}

	if count != 1 {
		return nil, fmt.Errorf("PromptSchemaComponent: exactly one member must be set, got %d", count)
	}

	return data, nil
}

func (u *PromptSchemaComponent) UnmarshalJSON(data []byte) error {
	var successCount int

	var v0 PromptOneOf0
	if err := json.Unmarshal(data, &v0); err == nil {
		u.PromptOneOf0 = &v0
		successCount++
	}

	var v1 PromptOneOf1
	if err := json.Unmarshal(data, &v1); err == nil {
		u.PromptOneOf1 = &v1
		successCount++
	}

	if successCount != 1 {
		return fmt.Errorf("PromptSchemaComponent: expected exactly one type to match, got %d", successCount)
	}

	return nil
}

// ApplyDefaults sets default values for fields that are nil.
func (u *PromptSchemaComponent) ApplyDefaults() {
	if u.PromptOneOf0 != nil {
		u.PromptOneOf0.ApplyDefaults()
	}
	if u.PromptOneOf1 != nil {
		u.PromptOneOf1.ApplyDefaults()
	}
}

// #/components/schemas/Prompt/oneOf/0
type Prompt0OneOfSchemaComponent struct {
	Type    *string       `json:"type,omitempty" form:"type,omitempty"`
	Prompt  []ChatMessage `json:"prompt" form:"prompt"`
	Name    string        `json:"name" form:"name"`
	Version int           `json:"version" form:"version"`
}

type PromptOneOf0 = Prompt0OneOfSchemaComponent

// ApplyDefaults sets default values for fields that are nil.
func (s *Prompt0OneOfSchemaComponent) ApplyDefaults() {
}

// #/components/schemas/Prompt/oneOf/0/allOf/0/properties/type
type Prompt00TypePropertyAllOfOneOfSchemaComponent string

const (
	PromptOneOf0AllOf0Type_chat Prompt00TypePropertyAllOfOneOfSchemaComponent = "chat"
)

type PromptOneOf0AllOf0Type = Prompt00TypePropertyAllOfOneOfSchemaComponent

// #/components/schemas/Prompt/oneOf/1
type Prompt1OneOfSchemaComponent struct {
	Type    *string `json:"type,omitempty" form:"type,omitempty"`
	Prompt  string  `json:"prompt" form:"prompt"`
	Name    string  `json:"name" form:"name"`
	Version int     `json:"version" form:"version"`
}

type PromptOneOf1 = Prompt1OneOfSchemaComponent

// ApplyDefaults sets default values for fields that are nil.
func (s *Prompt1OneOfSchemaComponent) ApplyDefaults() {
}

// #/components/schemas/Prompt/oneOf/1/allOf/0/properties/type
type Prompt10TypePropertyAllOfOneOfSchemaComponent string

const (
	PromptOneOf1AllOf0Type_text Prompt10TypePropertyAllOfOneOfSchemaComponent = "text"
)

type PromptOneOf1AllOf0Type = Prompt10TypePropertyAllOfOneOfSchemaComponent

// Base64-encoded, gzip-compressed OpenAPI spec.
var swaggerSpecJSON = []string{
	"H4sIAAAAAAAC/9SUT4/TMBDF7/kUIwWpFzZpxQEpRzhxQMuhEmc3eYmNEtt4JvtHiO+O4qYbh2132RVC",
	"oqfO68zzm5+b5PSJeQTt3u+2FbUGfUO9YyFjyYIFDam+v27JWVy3WU5axHNVlp0RPR6K2g2lU95c1a5B",
	"B7suzOTN5WSe5VlOXzUsjWxstza/NaKPJ7ydlGMOJtZu7Bs6gHwAI9ygKbKc9hq08cENXjZz5FvFdMDk",
	"O4UvMudhlTcVvSu2xTYztnVVRiRGelTJyrQHS0Z0g8DG2Yp2sd8r0VzRj59Z7QbvLKzwNM+1xqDiV6IP",
	"ivElpjjWRHLvUZE7fEMts+SD8whiwKcmIqsGLNVpjCUY2z3Ip0SP+owVdAizHvB9NAHN0ncV/ZNydorK",
	"Hnfyqsx+NXQh9bkwx8FZiLed/vomoK1ok5cL53KGXC58N3Hio1byGcyqwwvDB9c/D7x2VmBfs+Jkn5Sz",
	"0UPmv8pbhaDuE9UIBk7b6EmmCcPNP7m09fLxEU+tztA4c+STvZcIrrg9Ui/8CZYP7DicG4s3rJX8Fu45",
	"6CmTS9yXNf97QoK7lxBaXkt/TOhXAAAA//+WRkFKuQYAAA==",
}

// decodeSwaggerSpec decodes and decompresses the embedded spec.
func decodeSwaggerSpec() ([]byte, error) {
	joined := strings.Join(swaggerSpecJSON, "")
	raw, err := base64.StdEncoding.DecodeString(joined)
	if err != nil {
		return nil, fmt.Errorf("decoding base64: %w", err)
	}
	r, err := gzip.NewReader(bytes.NewReader(raw))
	if err != nil {
		return nil, fmt.Errorf("creating gzip reader: %w", err)
	}
	defer r.Close()
	var out bytes.Buffer
	if _, err := out.ReadFrom(r); err != nil {
		return nil, fmt.Errorf("decompressing: %w", err)
	}
	return out.Bytes(), nil
}

// decodeSwaggerSpecCached returns a closure that caches the decoded spec.
func decodeSwaggerSpecCached() func() ([]byte, error) {
	var cached []byte
	var cachedErr error
	var once sync.Once
	return func() ([]byte, error) {
		once.Do(func() {
			cached, cachedErr = decodeSwaggerSpec()
		})
		return cached, cachedErr
	}
}

var swaggerSpec = decodeSwaggerSpecCached()

// GetSwaggerSpecJSON returns the raw OpenAPI spec as JSON bytes.
func GetSwaggerSpecJSON() ([]byte, error) {
	return swaggerSpec()
}
